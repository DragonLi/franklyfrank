data Zero=.

interface Send x = send : x -> Unit.

interface Abort = aborting : Zero.

bind : x -> {x -> y} -> y.
bind x f = f x.

abort : [Abort]x.
abort = bind (aborting!) {}.

pats : [Send x]a      -> [Abort]a.
pats      [t]         = pats (t!). {- NB: makes pats non-terminating -}
pats   [send x -> k]  = pats (k Unit).
pats    x             = x.

main : Int.
main = 0.
